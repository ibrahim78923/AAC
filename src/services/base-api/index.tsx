import { BASE_URL } from '@/config';
import { AUTH_TOKEN_BYPASS_API } from '@/constants/strings';
import { RootState } from '@/redux/store';

import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';

// Tags
export const TAGS = [
  'ACCOUNTS',
  'USERS',
  'PLAN_MANEGEMENT',
  'Organization',
  'SettingSalesProductCategories',
  'SettingLifeCycleStage',
  'SettingContactStatus',
  'INVENTORY_ACTIVITY',
  'EXPENSE',
  'CUSTOMIZE',
  'WORKLOAD',
  'DROPDOWNS',
  'INVENTORY_EXPENSE',
  'TICKETS',
  'TASKS',
  'ASSETS_INVENTORY',
  'SETTINGS_FAQS',
  'SETTINGS_JOBS',
  'SETTINGS_QUICK_LINKS',
  'SETTINGS_JOB_APPLICATION',
  'AIR_SALES_QUOTES',
  'SETTINGS_PRODUCT_FEATURES',
  'SETTINGS_TAX_CALCULATIONS',
  'MyDocuments',
  'CLOSURE_RULES',
  'LOCATION',
  'VENDOR_LIST',
  'PRODUCT_CATALOG',
  'AGENTS',
  'TASK',
  'DROPDOWN_TASK',
  'CANNED_RESPONSES',
  'RESPONSES_LIST',
  'BUSINESS_HOUR',
  'BUSINESS_HOUR_BY_ID',
  'HOLIDAYS',
  'DROPDOWN_ASSET_TYPE_LIST',
  'VENDOR_PRODUCT_DETAIL',
  'TICKET_DETAILS',
  'LEADER_BOARD_AWARD_POINTS',
  'LEADER_BOARD_AGENT_LEVELS',
  'GET-SOFTWARE-USERS-DETAILS',
  'DEPARTMENT',
  'TICKET_ASSOCIATION',
  'DROPDOWN_DEPARTMENT',
  'DROPDOWN_AGENT',
  'DROPDOWN_REQUESTER',
  'RELATED_TICKETS',
  'ACTIVITY_LOG',
  'VENDOR_DETAIL_OVERVIEW',
  'REQUESTERS',
  'ASSET_TYPE',
  'DROPDOWN_ASSOCIATE_ASSET',
  'DROPDOWN_CATEGORIES',
  'ASSETS_SOFTWARE',
  'INVOICE',
  'DROPDOWN_AGENT_LIST',
  'ASSETS_CONTRACT',
  'CONTRACT_TYPE_DROPDOWN',
  'VENDOR_DROPDOWN',
  'PURCHASE_ORDER_OVERVIEW',
  'ASSETS_CONTRACT_LIST',
  'ASSETS_INVENTORY_SOFTWARE',
  'SOFTWARE_INSTALLATION',
  'ADD-TO-INVENTORY',
  'CONTACTS',
  'CONTACTS_VIEW',
  'CONTACT_ASSOCIATION',
  'CONTACT_NOTE',
  'CONTACT_CALL',
  'DROPDOWN_USERS',
  'DROPDOWN_CONTRACT',
  'GET_SOFTWARE_DETAIL',
  'ASSETS_INVENTORY_PURCHASE_ORDER',
  'ASSETS_INVENTORY_CONTRACTS',
  'DROPDOWN_ALL_ASSETS',
  'ASSETS_PURCHASEORDER',
  'USERS_DROPDOWN',
  'SOFTWARE_DROPDOWN',
  'DROPDOWN_ASSETS',
  'ASSETS_ITEM_ADDED',
  'KNOWLEDGE_BASE_ARTICLES',
  'TICKETS_APPROVALS',
  'CONTRACTS_OVERVIEW',
  'CUSTOMER_PORTAL_DASHBOARD',
  'NON_REGISTER_DASHBOARD',
  'CUSTOMER_PORTAL_KNOWLEDGE_BASE',
  'REQUEST_APPROVAL',
  'USER_LIST',
  'ASSETS_RECEIVED',
  'VENDOR_CONTRACT',
  'SOFTWARE_CONTRACTS',
  'CONTRACT_HISTORY',
  'PURCHASE_ORDER_STATUS',
  'ARTICLES_APPROVALS',
  'AIR_SERVICES_ROLES',
  'ACCOUNT_DETAILS',
  'ATTACHMENTS',
  'CONTACT_GROUPS',
  'SERVICES_WORKFLOW',
  'DASHBOARD_TICKETS',
  'DASHBOARD_CARDS_TICKETS',
  'ANNOUNCEMENTS',
  'DASHBOARD_ANNOUNCEMENTS_CUSTOMER',
  'DASHBOARD_RECENT_ACTIVITIES',
  'DASHBOARD_AGENT_AVAILABILITY',
  'SCHEMA_KEYS',
  'WORKFLOWS',
  'EMAIL_NOTIFICATION',
  'SERVICE_CATALOG',
  'CATALOG',
  'PURCHASE_ORDER',
  'TICKET_TIME_ENTRIES',
  'DROPDOWN_FOLDER',
  'TICKET_CONVERSATION_DISCUSSION',
  'TICKETS_CONVERSATION_CANNED_RESPONSES',
  'TICKETS_CONVERSATION',
  'TICKETS_CONVERSATION_ARTICLES',
  'LOCATION_DROPDOWN',
  'PERMISSIONS',
  'TEAM_LIST',
  'MANAGE_SHOP',
  'USER_LIST_DROPDOWN',
  'LEAD_CAPTURE_CTA',
  'AIR_SERVICES_ENQUIRIES',
  'TIERS',
  'LEAD_CAPTURE_FORM',
  'RULES',
  'AIR_SERVICES_SIGN_UP_LEADS',
  'DASHBOARD_EMAIL',
  'DATA_MANAGEMENT_IMPORT',
  'GOOGLE_CALENDAR_AUTH',
  'MEETINGS_CALENDARS',
  'TIME_SLOTS',
  'OFFICE_CALENDAR_AUTH',
  'GOOGLE_MEET_AUTH',
  'MS_TEAMS_AUTH',
  'MEETINGS_LOCATIONS',
  'AIR_OPERATIONS_ROLES',
  'AIR_LOYALTY_ROLES',
  'AIR_LOYALTY_USERS',
  'FEEDBACK_SURVEY',
  'ZOOM_AUTH',
  'MEETINGS_NOTIFICATION_SETTINGS',
  'DATA_MANAGEMENT_EXPORT',
  'MEETINGS',
  'DEALS',
  'CONTACTS',
  'COMPANY',
  'COMPANY_DETAILS',
  'COMPANY_CONTACTS',
  'COMPANY_ASSOCIATION',
  'DEALS_ASSOCIATION',
  'DEALS_PRODUCTS',
  'DEALS_CONTACTS',
  'DEALS_NOTES',
  'DEALS_TASKS',
  'DEALS_EMAILS',
  'DEALS_FILES',
  'DEALS_CALLS',
  'DEALS_MEETINGS',
  'DEALS_QUOTES',
  'DEALS_INVOICE',
  'DEALS_CONTRACTS',
  'DEALS_PURCHASE_ORDER',
  'DEALS_SHIPPING',
  'DEALS_PAYMENT',
  'UPSERT_GENERIC_REPORT',
  'CONTRACT_TYPE',
  'companies',
  'Permissions',
  'PRODUCTS',
  'CALENDER_TAG',
  'REPORTS_LEADS',
  'CUSTOMER_TICKET_CONVERSATION',
  'TEAMS',
  'TEST_WORKFLOWS',
  'CUSTOMER_PORTAL_SETTINGS',
  'ORGANIZATION_TEAMS',
  'ALL_USERS_AND_CONTACTS',
  'INVENTORY_OVERVIEW',
  'MARKETING_DASHBOARD',
  'SALES_DASHBOARD',
  'DROPDOWN_AGENTS',
  'SERVICES_WORKFLOWS',
  'CONTACTS_STATUS',
  'LIFECYCLE_STAGE',
  'CONTACT_OWNER',
  'USERS',
  'ORGANIZATIONS',
  'REPORTS',
  'PLAN_MANAGEMENT',
  'PlanTypes',
  'getProducts',
  'getPlanType',
  'bilingInvoices',
  'ORGANIZATIONS',
  'SUPER_ADMIN_DASHBOARD',
  'RECEIVER_BANK_ACCOUNT',
  'SETTINGS_DEAL_PIPELINE',
  'SETTINGS_SALE_PRODUCT',
  'SETTINGS_USERS_MANAGEMENT',
  'SETTING_NOTIFICATIONS',
  'FORECAST',
  'CAMPAIGNS',
  'CAMPAIGNS_TASKS',
];

const BYPASS_AUTH_API_ROUTES = [
  AUTH_TOKEN_BYPASS_API?.UPLOAD_FILE_TO_S3_USING_SIGNED_URL,
];

const baseQuery = fetchBaseQuery({
  baseUrl: BASE_URL,
  prepareHeaders: (headers, { getState, endpoint }) => {
    const token = (getState() as RootState)?.auth?.accessToken;

    if (token && !BYPASS_AUTH_API_ROUTES?.includes(endpoint)) {
      headers.set('Authorization', `Bearer ${token}`);
    }
    headers.set('ngrok-skip-browser-warning', 'Bearer YOUR_ACCESS_TOKEN_HERE');
    return headers;
  },
});

export const baseAPI = createApi({
  reducerPath: 'api',
  baseQuery: baseQuery,
  tagTypes: TAGS,
  endpoints: () => ({}),
});

export const clearApiCache = baseAPI.util.resetApiState;
